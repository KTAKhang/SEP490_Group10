{
	"info": {
		"name": "News Management API",
		"description": "Collection để test toàn bộ News Management API endpoints",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:3000",
			"type": "string"
		},
		{
			"key": "token",
			"value": "",
			"type": "string"
		},
		{
			"key": "newsId",
			"value": "",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "Public Endpoints",
			"item": [
				{
					"name": "Get Public News List",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/news/public?public=true&page=1&limit=20",
							"host": ["{{baseUrl}}"],
							"path": ["news", "public"],
							"query": [
								{
									"key": "public",
									"value": "true"
								},
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "20"
								},
								{
									"key": "search",
									"value": "",
									"disabled": true
								},
								{
									"key": "is_featured",
									"value": "",
									"disabled": true
								}
							]
						},
						"description": "Lấy danh sách bài viết công khai (chỉ PUBLISHED)"
					}
				},
				{
					"name": "Get Featured News",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/news/public/featured",
							"host": ["{{baseUrl}}"],
							"path": ["news", "public", "featured"]
						},
						"description": "Lấy danh sách bài viết nổi bật (tối đa 5)"
					}
				},
				{
					"name": "Get Public News By ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text",
								"disabled": true
							}
						],
						"url": {
							"raw": "{{baseUrl}}/news/public/{{newsId}}",
							"host": ["{{baseUrl}}"],
							"path": ["news", "public", "{{newsId}}"]
						},
						"description": "Lấy chi tiết bài viết công khai (optional auth để track view)"
					}
				}
			]
		},
		{
			"name": "Author Endpoints (Require Auth)",
			"item": [
				{
					"name": "Create News (DRAFT)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {
							"mode": "form-data",
							"formdata": [
								{
									"key": "title",
									"value": "Tiêu đề bài viết mẫu - Phải có ít nhất 10 ký tự",
									"type": "text"
								},
								{
									"key": "content",
									"value": "<p>Đây là nội dung bài viết mẫu. Nội dung này phải có ít nhất 100 ký tự để đáp ứng yêu cầu validation của hệ thống. Tôi sẽ viết thêm một số câu để đảm bảo đủ độ dài.</p><p>Đây là đoạn văn thứ hai để làm phong phú nội dung bài viết.</p>",
									"type": "text"
								},
								{
									"key": "excerpt",
									"value": "Đây là đoạn tóm tắt bài viết. Excerpt phải có ít nhất 50 ký tự và tối đa 500 ký tự để đáp ứng yêu cầu của hệ thống.",
									"type": "text",
									"disabled": true
								},
								{
									"key": "status",
									"value": "DRAFT",
									"type": "text"
								},
								{
									"key": "thumbnail",
									"type": "file",
									"src": []
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/news",
							"host": ["{{baseUrl}}"],
							"path": ["news"]
						},
						"description": "Tạo bài viết mới với status DRAFT"
					}
				},
				{
					"name": "Create News (PUBLISHED)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {
							"mode": "form-data",
							"formdata": [
								{
									"key": "title",
									"value": "Bài viết đã xuất bản - Phải có đủ title, content, thumbnail",
									"type": "text"
								},
								{
									"key": "content",
									"value": "<h1>Tiêu đề bài viết</h1><p>Đây là nội dung bài viết đã được xuất bản. Nội dung này phải có ít nhất 100 ký tự để đáp ứng yêu cầu validation của hệ thống. Tôi sẽ viết thêm một số câu để đảm bảo đủ độ dài và làm phong phú nội dung.</p><p>Đây là đoạn văn thứ hai để làm phong phú nội dung bài viết và cung cấp thêm thông tin cho người đọc.</p>",
									"type": "text"
								},
								{
									"key": "excerpt",
									"value": "Đây là đoạn tóm tắt bài viết đã xuất bản. Excerpt phải có ít nhất 50 ký tự và tối đa 500 ký tự để đáp ứng yêu cầu của hệ thống.",
									"type": "text",
									"disabled": true
								},
								{
									"key": "status",
									"value": "PUBLISHED",
									"type": "text"
								},
								{
									"key": "is_featured",
									"value": "false",
									"type": "text"
								},
								{
									"key": "thumbnail",
									"type": "file",
									"src": []
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/news",
							"host": ["{{baseUrl}}"],
							"path": ["news"]
						},
						"description": "Tạo bài viết mới với status PUBLISHED (phải có đủ title, content, thumbnail)"
					}
				},
				{
					"name": "Create Featured News",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {
							"mode": "form-data",
							"formdata": [
								{
									"key": "title",
									"value": "Bài viết nổi bật - Featured News Example",
									"type": "text"
								},
								{
									"key": "content",
									"value": "<h1>Bài viết nổi bật</h1><p>Đây là bài viết được đánh dấu là nổi bật. Hệ thống chỉ cho phép tối đa 5 bài nổi bật cùng lúc. Nếu set bài thứ 6, hệ thống sẽ tự động bỏ featured bài cũ nhất.</p><p>Nội dung này phải có ít nhất 100 ký tự để đáp ứng yêu cầu validation.</p>",
									"type": "text"
								},
								{
									"key": "status",
									"value": "PUBLISHED",
									"type": "text"
								},
								{
									"key": "is_featured",
									"value": "true",
									"type": "text"
								},
								{
									"key": "thumbnail",
									"type": "file",
									"src": []
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/news",
							"host": ["{{baseUrl}}"],
							"path": ["news"]
						},
						"description": "Tạo bài viết nổi bật (chỉ PUBLISHED mới được featured)"
					}
				},
				{
					"name": "Get News List (Auth)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/news?page=1&limit=20&status=DRAFT",
							"host": ["{{baseUrl}}"],
							"path": ["news"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "20"
								},
								{
									"key": "status",
									"value": "DRAFT",
									"disabled": true
								},
								{
									"key": "search",
									"value": "",
									"disabled": true
								},
								{
									"key": "author_id",
									"value": "",
									"disabled": true
								}
							]
						},
						"description": "Lấy danh sách bài viết (của mình hoặc tất cả nếu admin)"
					}
				},
				{
					"name": "Get News By ID (Auth)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/news/{{newsId}}",
							"host": ["{{baseUrl}}"],
							"path": ["news", "{{newsId}}"]
						},
						"description": "Lấy chi tiết bài viết (có track view nếu không phải author/admin)"
					}
				},
				{
					"name": "Update News - Change Status to PUBLISHED",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {
							"mode": "form-data",
							"formdata": [
								{
									"key": "status",
									"value": "PUBLISHED",
									"type": "text"
								},
								{
									"key": "thumbnail",
									"type": "file",
									"src": [],
									"disabled": true
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/news/{{newsId}}",
							"host": ["{{baseUrl}}"],
							"path": ["news", "{{newsId}}"]
						},
						"description": "Cập nhật status sang PUBLISHED (phải có đủ title, content, thumbnail)"
					}
				},
				{
					"name": "Update News - Change Title and Content",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {
							"mode": "form-data",
							"formdata": [
								{
									"key": "title",
									"value": "Tiêu đề đã được cập nhật - Updated Title",
									"type": "text"
								},
								{
									"key": "content",
									"value": "<h1>Nội dung đã cập nhật</h1><p>Đây là nội dung bài viết đã được cập nhật. Nội dung này phải có ít nhất 100 ký tự để đáp ứng yêu cầu validation của hệ thống.</p><p>Đây là đoạn văn thứ hai để làm phong phú nội dung bài viết.</p>",
									"type": "text"
								},
								{
									"key": "excerpt",
									"value": "Đây là excerpt đã được cập nhật. Excerpt phải có ít nhất 50 ký tự.",
									"type": "text",
									"disabled": true
								},
								{
									"key": "thumbnail",
									"type": "file",
									"src": [],
									"disabled": true
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/news/{{newsId}}",
							"host": ["{{baseUrl}}"],
							"path": ["news", "{{newsId}}"]
						},
						"description": "Cập nhật title và content của bài viết"
					}
				},
				{
					"name": "Update News - Set Featured",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {
							"mode": "form-data",
							"formdata": [
								{
									"key": "is_featured",
									"value": "true",
									"type": "text"
								},
								{
									"key": "thumbnail",
									"type": "file",
									"src": [],
									"disabled": true
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/news/{{newsId}}",
							"host": ["{{baseUrl}}"],
							"path": ["news", "{{newsId}}"]
						},
						"description": "Đánh dấu bài viết là featured (chỉ PUBLISHED mới được featured)"
					}
				},
				{
					"name": "Update News - Change to DRAFT",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {
							"mode": "form-data",
							"formdata": [
								{
									"key": "status",
									"value": "DRAFT",
									"type": "text"
								},
								{
									"key": "thumbnail",
									"type": "file",
									"src": [],
									"disabled": true
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/news/{{newsId}}",
							"host": ["{{baseUrl}}"],
							"path": ["news", "{{newsId}}"]
						},
						"description": "Chuyển bài viết về DRAFT (cần thiết trước khi xóa PUBLISHED)"
					}
				},
				{
					"name": "Delete News (DRAFT only)",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/news/{{newsId}}",
							"host": ["{{baseUrl}}"],
							"path": ["news", "{{newsId}}"]
						},
						"description": "Xóa bài viết (chỉ có thể xóa DRAFT, không thể xóa PUBLISHED trực tiếp)"
					}
				}
			]
		},
		{
			"name": "Test Cases - Validation",
			"item": [
				{
					"name": "Create News - Title Too Short (Error)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {
							"mode": "form-data",
							"formdata": [
								{
									"key": "title",
									"value": "Short",
									"type": "text"
								},
								{
									"key": "content",
									"value": "<p>Content must be at least 100 characters long to pass validation. This is a test case for validation error.</p>",
									"type": "text"
								},
								{
									"key": "thumbnail",
									"type": "file",
									"src": []
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/news",
							"host": ["{{baseUrl}}"],
							"path": ["news"]
						},
						"description": "Test validation: Title phải có ít nhất 10 ký tự"
					}
				},
				{
					"name": "Create News - Content Too Short (Error)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {
							"mode": "form-data",
							"formdata": [
								{
									"key": "title",
									"value": "Title đủ dài để pass validation",
									"type": "text"
								},
								{
									"key": "content",
									"value": "Short",
									"type": "text"
								},
								{
									"key": "thumbnail",
									"type": "file",
									"src": []
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/news",
							"host": ["{{baseUrl}}"],
							"path": ["news"]
						},
						"description": "Test validation: Content phải có ít nhất 100 ký tự"
					}
				},
				{
					"name": "Create News - Missing Thumbnail (Error)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {
							"mode": "form-data",
							"formdata": [
								{
									"key": "title",
									"value": "Title đủ dài để pass validation",
									"type": "text"
								},
								{
									"key": "content",
									"value": "<p>Content must be at least 100 characters long to pass validation. This is a test case for validation error when thumbnail is missing.</p>",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/news",
							"host": ["{{baseUrl}}"],
							"path": ["news"]
						},
						"description": "Test validation: Thumbnail là bắt buộc"
					}
				},
				{
					"name": "Publish News - Missing Required Fields (Error)",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {
							"mode": "form-data",
							"formdata": [
								{
									"key": "status",
									"value": "PUBLISHED",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/news/{{newsId}}",
							"host": ["{{baseUrl}}"],
							"path": ["news", "{{newsId}}"]
						},
						"description": "Test validation: Không thể publish nếu thiếu title, content hoặc thumbnail"
					}
				},
				{
					"name": "Delete PUBLISHED News (Error)",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/news/{{newsId}}",
							"host": ["{{baseUrl}}"],
							"path": ["news", "{{newsId}}"]
						},
						"description": "Test validation: Không thể xóa PUBLISHED trực tiếp, phải chuyển về DRAFT trước"
					}
				}
			]
		}
	]
}
